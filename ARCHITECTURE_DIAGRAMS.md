```\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•‘                    AQI ALERT FEATURE - SYSTEM ARCHITECTURE                    â•‘\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                              USER INTERFACE LAYER                               â”‚\nâ”‚                                                                                 â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚                          NAVBAR COMPONENT                                â”‚  â”‚\nâ”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚\nâ”‚  â”‚  â”‚  Actions   â”‚  â”‚   ğŸŒ¬ï¸ AQI ALERT   â”‚  â”‚  ğŸ”” Notificationsâ”‚ User   â”‚   â”‚  â”‚\nâ”‚  â”‚  â”‚            â”‚  â”‚   (if AQI > 100) â”‚  â”‚  â”‚              â”‚ Profileâ”‚   â”‚  â”‚\nâ”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚\nâ”‚  â”‚                        â–¼ (Click)                                           â”‚  â”‚\nâ”‚  â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚  â”‚\nâ”‚  â”‚                  â”‚  Alert Popup     â”‚                                     â”‚  â”‚\nâ”‚  â”‚                  â”‚  - AQI Value     â”‚                                     â”‚  â”‚\nâ”‚  â”‚                  â”‚  - Status        â”‚                                     â”‚  â”‚\nâ”‚  â”‚                  â”‚  - Location      â”‚                                     â”‚  â”‚\nâ”‚  â”‚                  â”‚  - Progress Bar  â”‚                                     â”‚  â”‚\nâ”‚  â”‚                  â”‚  - Health Tips   â”‚                                     â”‚  â”‚\nâ”‚  â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                           REACT COMPONENT LAYER                                 â”‚\nâ”‚                                                                                 â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚  Navbar.jsx (Component)                                                  â”‚  â”‚\nâ”‚  â”‚  â”œâ”€ useState: showAQIAlert                                               â”‚  â”‚\nâ”‚  â”‚  â”œâ”€ useAuth: user & logout                                              â”‚  â”‚\nâ”‚  â”‚  â”œâ”€ useAQIAlert: aqiAlert, isLoading                                    â”‚  â”‚\nâ”‚  â”‚  â”œâ”€ useNotifications: notifications                                     â”‚  â”‚\nâ”‚  â”‚  â””â”€ JSX: Render icon + popup                                            â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                            REACT HOOKS LAYER                                    â”‚\nâ”‚                                                                                 â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚  useAQIAlert()           â”‚  â”‚  useAQIAlertContext()                    â”‚   â”‚\nâ”‚  â”‚  â”œâ”€ useQuery             â”‚  â”‚  â”œâ”€ useContext                           â”‚   â”‚\nâ”‚  â”‚  â”œâ”€ queryKey: aqi-alert  â”‚  â”‚  â”œâ”€ Return: {aqiLevel, isHighAQI, ...}  â”‚   â”‚\nâ”‚  â”‚  â”œâ”€ queryFn: fetch       â”‚  â”‚  â””â”€ For shared state across app         â”‚   â”‚\nâ”‚  â”‚  â”œâ”€ Result: {            â”‚  â”‚                                          â”‚   â”‚\nâ”‚  â”‚  â”‚   aqiLevel: 145,      â”‚  â”‚                                          â”‚   â”‚\nâ”‚  â”‚  â”‚   isHighAQI: true,    â”‚  â”‚                                          â”‚   â”‚\nâ”‚  â”‚  â”‚   aqiData: {...},     â”‚  â”‚                                          â”‚   â”‚\nâ”‚  â”‚  â”‚   location: 'Paris'   â”‚  â”‚                                          â”‚   â”‚\nâ”‚  â”‚  â”‚ }                      â”‚  â”‚                                          â”‚   â”‚\nâ”‚  â”‚  â””â”€ Auto-refresh: 30s    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                          STATE MANAGEMENT LAYER                                 â”‚\nâ”‚                                                                                 â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚  AQIAlertContext (Redux-like State)                                      â”‚  â”‚\nâ”‚  â”‚  â”œâ”€ Provider in App.jsx                                                 â”‚  â”‚\nâ”‚  â”‚  â”œâ”€ State: {                                                             â”‚  â”‚\nâ”‚  â”‚  â”‚   aqiAlert: {...},                                                    â”‚  â”‚\nâ”‚  â”‚  â”‚   isLoading: false,                                                   â”‚  â”‚\nâ”‚  â”‚  â”‚   isHighAQI: true,                                                    â”‚  â”‚\nâ”‚  â”‚  â”‚   aqiLevel: 145                                                       â”‚  â”‚\nâ”‚  â”‚  â”‚ }                                                                      â”‚  â”‚\nâ”‚  â”‚  â””â”€ Accessible via useAQIAlertContext()                                  â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                    â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                           API GATEWAY LAYER (3000)                              â”‚\nâ”‚                                                                                 â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚  Express Router                                                          â”‚  â”‚\nâ”‚  â”‚  â”œâ”€ CORS Configuration                                                  â”‚  â”‚\nâ”‚  â”‚  â”œâ”€ JWT Middleware (Auth)                                               â”‚  â”‚\nâ”‚  â”‚  â”œâ”€ Rate Limiting                                                       â”‚  â”‚\nâ”‚  â”‚  â””â”€ Route to AQI Service                                                â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                    â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                      AQI SERVICE LAYER (Port 5003)                              â”‚\nâ”‚                                                                                 â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚  GET /api/aqi/user-location (NEW ENDPOINT)                              â”‚  â”‚\nâ”‚  â”‚  â”œâ”€ Auth: JWT Token (required)                                          â”‚  â”‚\nâ”‚  â”‚  â”œâ”€ Logic:                                                              â”‚  â”‚\nâ”‚  â”‚  â”‚  1. Validate JWT token                                               â”‚  â”‚\nâ”‚  â”‚  â”‚  2. Query DB for latest AQI                                          â”‚  â”‚\nâ”‚  â”‚  â”‚  3. If not found, fetch external API                                 â”‚  â”‚\nâ”‚  â”‚  â”‚  4. Save to DB                                                       â”‚  â”‚\nâ”‚  â”‚  â”‚  5. Return JSON response                                             â”‚  â”‚\nâ”‚  â”‚  â”œâ”€ Response: {                                                         â”‚  â”‚\nâ”‚  â”‚  â”‚   aqi: 145,                                                          â”‚  â”‚\nâ”‚  â”‚  â”‚   location: 'Paris',                                                 â”‚  â”‚\nâ”‚  â”‚  â”‚   bucket: 'Unhealthy (SG)',                                          â”‚  â”‚\nâ”‚  â”‚  â”‚   temperature: 22.5,                                                 â”‚  â”‚\nâ”‚  â”‚  â”‚   humidity: 65,                                                      â”‚  â”‚\nâ”‚  â”‚  â”‚   wind_speed: 8.3,                                                   â”‚  â”‚\nâ”‚  â”‚  â”‚   pollutants: {...},                                                 â”‚  â”‚\nâ”‚  â”‚  â”‚   timestamp: '2026-01-12...'                                         â”‚  â”‚\nâ”‚  â”‚  â”‚ }                                                                     â”‚  â”‚\nâ”‚  â”‚  â””â”€ Error Handling: Returns appropriate HTTP codes                      â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                    â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                          DATA PERSISTENCE LAYER                                 â”‚\nâ”‚                                                                                 â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚  SQLite Database         â”‚  â”‚  External APIs (Optional)                â”‚   â”‚\nâ”‚  â”‚  â”œâ”€ Table: aqi_data      â”‚  â”‚  â”œâ”€ AQICN API                            â”‚   â”‚\nâ”‚  â”‚  â”œâ”€ Columns:             â”‚  â”‚  â”œâ”€ Weather APIs                         â”‚   â”‚\nâ”‚  â”‚  â”‚  - id                 â”‚  â”‚  â””â”€ Location APIs                        â”‚   â”‚\nâ”‚  â”‚  â”‚  - location            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚  â”‚  â”‚  - aqi                â”‚                                                  â”‚\nâ”‚  â”‚  â”‚  - bucket              â”‚                                                  â”‚\nâ”‚  â”‚  â”‚  - temperature         â”‚                                                  â”‚\nâ”‚  â”‚  â”‚  - humidity            â”‚                                                  â”‚\nâ”‚  â”‚  â”‚  - wind_speed          â”‚                                                  â”‚\nâ”‚  â”‚  â”‚  - pollutants (JSON)   â”‚                                                  â”‚\nâ”‚  â”‚  â”‚  - timestamp           â”‚                                                  â”‚\nâ”‚  â”‚  â””â”€ Indexed by location  â”‚                                                  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•‘                             DATA FLOW DIAGRAM                                   â•‘\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                           SEQUENCE: Page Load                                    â”‚\nâ”‚                                                                                 â”‚\nâ”‚  1. User loads Dashboard                                                       â”‚\nâ”‚       â†“                                                                         â”‚\nâ”‚  2. Navbar mounts                                                              â”‚\nâ”‚       â†“                                                                         â”‚\nâ”‚  3. useAQIAlert hook initializes                                               â”‚\nâ”‚       â†“                                                                         â”‚\nâ”‚  4. useQuery fetches /api/aqi/user-location                                   â”‚\nâ”‚       â†“                                                                         â”‚\nâ”‚  5. API Gateway routes to AQI Service                                          â”‚\nâ”‚       â†“                                                                         â”‚\nâ”‚  6. AQI Service queries database                                               â”‚\nâ”‚       â†“                                                                         â”‚\nâ”‚  7. Returns AQI data to frontend                                               â”‚\nâ”‚       â†“                                                                         â”‚\nâ”‚  8. React updates state                                                        â”‚\nâ”‚       â†“                                                                         â”‚\nâ”‚  9. Navbar re-renders with icon (if AQI > 100)                                â”‚\nâ”‚       â†“                                                                         â”‚\nâ”‚  10. User sees alert icon in navbar                                            â”‚\nâ”‚                                                                                 â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                      SEQUENCE: User Clicks Alert Icon                           â”‚\nâ”‚                                                                                 â”‚\nâ”‚  1. User clicks ğŸŒ¬ï¸ icon in navbar                                              â”‚\nâ”‚       â†“                                                                         â”‚\nâ”‚  2. useState: showAQIAlert = true                                              â”‚\nâ”‚       â†“                                                                         â”‚\nâ”‚  3. Popup JSX renders                                                          â”‚\nâ”‚       â†“                                                                         â”‚\nâ”‚  4. Popup displays:                                                            â”‚\nâ”‚     - Color-coded header                                                       â”‚\nâ”‚     - AQI value                                                                â”‚\nâ”‚     - Progress bar                                                             â”‚\nâ”‚     - Location info                                                            â”‚\nâ”‚     - Health recommendations                                                   â”‚\nâ”‚     - Close button                                                             â”‚\nâ”‚       â†“                                                                         â”‚\nâ”‚  5. User reads information                                                     â”‚\nâ”‚       â†“                                                                         â”‚\nâ”‚  6. User closes popup (click X or outside)                                     â”‚\nâ”‚       â†“                                                                         â”‚\nâ”‚  7. useState: showAQIAlert = false                                             â”‚\nâ”‚       â†“                                                                         â”‚\nâ”‚  8. Popup hidden                                                               â”‚\nâ”‚                                                                                 â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                    SEQUENCE: Auto-Update (Every 30 seconds)                     â”‚\nâ”‚                                                                                 â”‚\nâ”‚  1. useQuery timer fires (30s interval)                                        â”‚\nâ”‚       â†“                                                                         â”‚\nâ”‚  2. Fetch new AQI data from /api/aqi/user-location                            â”‚\nâ”‚       â†“                                                                         â”‚\nâ”‚  3. Compare with cached data                                                   â”‚\nâ”‚       â†“                                                                         â”‚\nâ”‚  4. If different, update state                                                 â”‚\nâ”‚       â†“                                                                         â”‚\nâ”‚  5. Re-render navbar with new data                                             â”‚\nâ”‚       â†“                                                                         â”‚\nâ”‚  6. User sees updated icon/popup (if open)                                     â”‚\nâ”‚                                                                                 â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•‘                            DEPLOYMENT STRUCTURE                                 â•‘\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                          Docker Compose Services                                â”‚\nâ”‚                                                                                 â”‚\nâ”‚  Container 1: Frontend (Port 3000)                                             â”‚\nâ”‚  â”œâ”€ React App with AQI Alert                                                  â”‚\nâ”‚  â”œâ”€ Files: App.jsx, Navbar.jsx, hooks, context                                â”‚\nâ”‚  â””â”€ Dependencies: React, Lucide, TanStack Query, etc.                          â”‚\nâ”‚                                                                                 â”‚\nâ”‚  Container 2: API Gateway (Port 3000 internal)                                 â”‚\nâ”‚  â”œâ”€ Express router                                                             â”‚\nâ”‚  â”œâ”€ Routes requests to services                                                â”‚\nâ”‚  â”œâ”€ Handles JWT auth                                                           â”‚\nâ”‚  â””â”€ File: api-gateway/index.js                                                 â”‚\nâ”‚                                                                                 â”‚\nâ”‚  Container 3: AQI Service (Port 5003)                                          â”‚\nâ”‚  â”œâ”€ New endpoint: /api/aqi/user-location                                       â”‚\nâ”‚  â”œâ”€ File: aqi-service/index.js (modified)                                      â”‚\nâ”‚  â”œâ”€ Database: SQLite (aqi.db)                                                  â”‚\nâ”‚  â””â”€ Other endpoints: /api/aqi/:location, /api/aqi/history/:location            â”‚\nâ”‚                                                                                 â”‚\nâ”‚  Other Services: (unchanged)                                                   â”‚\nâ”‚  â”œâ”€ User Service (5000)                                                        â”‚\nâ”‚  â”œâ”€ Location Service (5002)                                                    â”‚\nâ”‚  â”œâ”€ Notification Service (5004)                                                â”‚\nâ”‚  â”œâ”€ Kafka (message broker)                                                     â”‚\nâ”‚  â””â”€ Zookeeper (kafka coordinator)                                              â”‚\nâ”‚                                                                                 â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•‘                              COLOR FLOW LOGIC                                   â•‘\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n  AQI Value â†’ getAQIColor(value) â†’ Returns Object\n  \n  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n  â”‚ Input: AQI Value (e.g., 145)                                â”‚\n  â”‚                                                              â”‚\n  â”‚ if (145 <= 50)   â†’ Green                                   â”‚\n  â”‚ if (145 <= 100)  â†’ Yellow                                  â”‚\n  â”‚ if (145 <= 150)  â†’ Orange  â† MATCH                         â”‚\n  â”‚ if (145 <= 200)  â†’ Red                                     â”‚\n  â”‚ if (145 <= 300)  â†’ Purple                                  â”‚\n  â”‚ else             â†’ Dark Red                                â”‚\n  â”‚                                                              â”‚\n  â”‚ Output: {                                                    â”‚\n  â”‚   color: 'bg-orange-500',                                  â”‚\n  â”‚   label: 'Unhealthy (SG)',                                 â”‚\n  â”‚   bgClass: 'bg-orange-500/10',                             â”‚\n  â”‚   textClass: 'text-orange-500'                             â”‚\n  â”‚ }                                                            â”‚\n  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n  \n  These classes are applied to:\n  â”œâ”€ Icon color\n  â”œâ”€ Icon background\n  â”œâ”€ Popup header background\n  â”œâ”€ Progress bar color\n  â””â”€ Text colors\n\n\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•‘                            FILE DEPENDENCIES                                    â•‘\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nApp.jsx\n  â”œâ”€ imports AQIAlertProvider\n  â””â”€ wraps Layout\n  \nLayout.jsx\n  â””â”€ renders Navbar\n  \nNavbar.jsx\n  â”œâ”€ imports useAQIAlert hook\n  â”œâ”€ imports useAQIAlertContext hook\n  â”œâ”€ imports getAQIColor function\n  â””â”€ renders alert icon + popup\n  \nuseAQIAlert.js\n  â”œâ”€ uses useQuery (TanStack Query)\n  â”œâ”€ calls GET /api/aqi/user-location\n  â””â”€ exports {useAQIAlert, getAQIColor}\n  \nAQIAlertContext.jsx\n  â”œâ”€ creates React Context\n  â”œâ”€ uses useAQIAlert internally\n  â””â”€ exports {AQIAlertContext, AQIAlertProvider}\n  \nuseAQIAlertContext.js\n  â”œâ”€ imports AQIAlertContext\n  â””â”€ exports useAQIAlertContext hook\n  \naqi-service/index.js\n  â”œâ”€ new route: GET /api/aqi/user-location\n  â”œâ”€ queries aqi_data table\n  â””â”€ returns JSON response\n```\n\n